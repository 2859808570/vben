# SPMS 应用配置
location /spms {
    # 自动给 /spms 补 /，让后续 alias 匹配正确
    rewrite ^/spms$ /spms/ permanent;
    # 核心：alias末尾保留/，确保路径拼接正确
    alias /var/www/spms/;
    
    # 索引文件（确保和实际文件名称一致，比如index.html存在）
    index index.html;
    
    # 修复try_files：适配alias+子路径，末尾指向相对的index.html
    try_files $uri $uri/ /spms/index.html;

    # 不缓存html，防止程序更新后缓存继续生效
    if ($request_filename ~* .*\.(?:htm|html)$) {
        add_header Cache-Control "private, no-store, no-cache, must-revalidate, proxy-revalidate";
        access_log on;
    }
}